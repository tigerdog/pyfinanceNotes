============================
**returns模块**
============================
.. automodule:: returns
   :members:

+++++++++++++++++++++++++++
**TSeries类**
+++++++++++++++++++++++++++
.. autoclass:: TSeries
   :members:

----------------------------------------------------------------------
**CAPM方法（资本资产定价模型）**
----------------------------------------------------------------------
.. automethod:: TSeries.CAPM
----------------------------------------------------------------------
**ret_rels方法**
----------------------------------------------------------------------
.. automethod:: TSeries.ret_rels
----------------------------------------------------------------------
**anlzd_ret方法（年化收益率）**
----------------------------------------------------------------------
.. automethod:: TSeries.anlzd_ret
----------------------------------------------------------------------
**cuml_ret方法（累计年收益率）**
----------------------------------------------------------------------
.. automethod:: TSeries.cuml_ret
----------------------------------------------------------------------
**rollup方法（resample到不同阶段的收益率）**
----------------------------------------------------------------------
.. automethod:: TSeries.rollup
----------------------------------------------------------------------
**anlzd_stdev方法(年化标准差)**
----------------------------------------------------------------------
*默认已经被我改成freq=250*

.. automethod:: TSeries.anlzd_stdev
----------------------------------------------------------------------
**semi_stdev方法(下行标准差)**
----------------------------------------------------------------------
*默认已经被我改成freq=250*

.. automethod:: TSeries.semi_stdev
----------------------------------------------------------------------
**drawdown_start方法(最大回撤起始时间)**
----------------------------------------------------------------------
.. automethod:: TSeries.drawdown_start
----------------------------------------------------------------------
**drawdown_end方法(最大回撤结束时间)**
----------------------------------------------------------------------
.. automethod:: TSeries.drawdown_end
----------------------------------------------------------------------
**drawdown_length方法(最大回撤天数)**
----------------------------------------------------------------------
.. automethod:: TSeries.drawdown_length

----------------------------------------------------------------------
**pct_negative方法(个股下行--收益负--时间占比)**
----------------------------------------------------------------------
*收益小于0的个数的占比*

.. automethod:: TSeries.pct_negative

----------------------------------------------------------------------
**pct_positive(个股上行--收益正--时间占比)**
----------------------------------------------------------------------
.. automethod:: TSeries.pct_positive

----------------------------------------------------------------------
**sharpe_ratio(夏普比率)**
----------------------------------------------------------------------
*rf --risk free*

*分子要减去无风险利率*

*Formula=(年化收益-无风险利率)/年化收益标准差*

.. automethod:: TSeries.sharpe_ratio

----------------------------------------------------------------------
**sortino_ratio(索提诺比率)**
----------------------------------------------------------------------
*用下行标准差来替代年化标准差*

*我已经改默认值 freq=250*

.. automethod:: TSeries.sortino_ratio
----------------------------------------------------------------------
**calmar_ratio(卡玛比率)**
----------------------------------------------------------------------
*用年化收益/最大回撤率*

*不考虑方向（上涨还是下跌，取绝对值*

*是否可以理解最大回撤率是一个波动的指标*

*年化标准差或者说下行标准差是一个风险指标（反映的是风险）*

.. automethod:: TSeries.calmar_ratio

----------------------------------------------------------------------
**batting_avg(比基准收益高的时间占比)**
----------------------------------------------------------------------
*用算术方法和基准进行比较，其实就是减法*

*用几何方法和基准进行比较，其实就是除法（比率：各自+1后相除）*

.. automethod:: TSeries.batting_avg

----------------------------------------------------------------------
**up_capture(上行期与基准收益比)**
----------------------------------------------------------------------
*采用了几何均值，即连乘再开n次方*

.. automethod:: TSeries.up_capture

----------------------------------------------------------------------
**down_capture(下行期与基准收益比)**
----------------------------------------------------------------------
*采用了几何均值，即连乘再开n次方*

.. automethod:: TSeries.down_capture

----------------------------------------------------------------------
**info_ratio(信息比率)**
----------------------------------------------------------------------
*所谓的单位超额收益即年化的超额收益*

*所谓的单位风险即年化的超额收益标准差*

*标准差，衡量价格变动大小的一种指标，指的是在过去一段时间内，资产的各个计价区间的投资回报，偏离所有区间平均回报的大小程度。

“一个标准差是 x%”， 这句话中有投资结果发生机率高低的意义，也有投资结果大小的意义。

例如：“过去一年”，“上证指数”“月回报”的标准差若为35%，就是说在一个标准差的发生机率（约68.27%），你投资一年的结果，会落在赚或赔 35%之内，而大部分的投资结果（例如在两个标准差的机率95.45%），会落在赚或赔 70%之内，只有极小的机率（剩下的4.55%），投资的结果会赚或赔超过 70%。

也就是说，当一个投资标的标准差愈大，代表价格波动愈大，投资结果与投资预期（投资人通常会以过去区间的平均回报形成投资预期）可能有很大的落差，标准差愈大，投资结果愈难以预期，可能的投资亏损会让投资人无法承受，投资人需谨慎配置。


.. automethod:: TSeries.info_ratio

----------------------------------------------------------------------
**alpha方法**
----------------------------------------------------------------------

**所谓的alpha、贝塔其实就是用最小二乘法OLS做直线回归**
**贝塔就是斜率，**
**阿尔法就是截距**

**以后公式要写成 y=βx+α**

**在实际中，很多主动型基金的贝塔系统接近于1。**

**所以粗略来看，可以把大盘指数收益率当作贝塔收益，**
**指数收益率超越大盘的部分当作阿尔法收益。**

**capm模型里预测的收益对应的是市场风险，也就是rm-rf。**

**如果是想知道一只股票的预期收益率，就把这个股票的beta放入公式**

.. automethod:: TSeries.alpha

----------------------------------------------------------------------
**beta方法**
----------------------------------------------------------------------

*beta值反映的是系统风险*

*即最小二乘法的第二个解*

**个体和基准协方差/（基准的方差）**

.. automethod:: TSeries.beta

----------------------------------------------------------------------
**treynor_ratio(特雷诺指数)**
----------------------------------------------------------------------
*分子=年化收益-无风险利率（即保本理财的利率）*

*分母=CAPM模型中的beta值*

.. automethod:: TSeries.treynor_ratio







